# 통화 중 수신 및 대기-통화 전환 기능 테스트 시나리오

## 1. 단일 통화 + 홀드 버튼 시나리오

### 테스트 목표
사용자가 단일 통화 중에 홀드 버튼을 눌러 대기 상태로 전환하는 기능이 정상 작동하는지 확인

### 테스트 단계
1. 일반 통화 연결 (발신 또는 수신)
2. 통화가 연결되고 `on_call_contents` 화면에서 '통화대기' 버튼 클릭
3. 홀드 상태가 되는지 확인
4. 홀드 버튼을 다시 클릭하여 통화가 재개되는지 확인

### 기대 결과
- 홀드 버튼 클릭 시 통화가 대기 상태로 전환됨
- 네이티브에서는 `Call.STATE_HOLDING` 상태로 변경됨
- Flutter에서는 `CallModelState.holding` 상태로 변경됨
- UI에 홀드 버튼이 활성화 상태로 표시됨
- 홀드 버튼 재클릭 시 통화가 다시 활성화됨

## 2. 통화 중 수신 + 대기 후 통화 시나리오

### 테스트 목표
통화 중에 새로운 전화가 수신되었을 때, '대기 후 통화' 기능이 정상적으로 작동하는지 확인

### 테스트 단계
1. 첫 번째 통화 연결 (A와 통화 중)
2. 두 번째 전화 수신 (B로부터 전화 수신)
3. `call_waiting_dialog` 팝업 표시 확인
4. '대기 후 통화' 버튼 클릭
5. 첫 번째 통화(A)가 대기 상태로 전환되고, 두 번째 통화(B)가 활성화되는지 확인
6. `on_call_contents` 화면에서 대기 중인 통화 정보(A) 표시 확인

### 기대 결과
- 새로운 전화 수신 시 `call_waiting_dialog` 팝업이 표시됨
- '대기 후 통화' 버튼 클릭 시 첫 번째 통화가 대기 상태로 전환됨
- 두 번째 통화가 활성화되고 `on_call_contents` 화면에 표시됨
- 대기 중인 통화 정보가 `on_call_contents` 화면의 대기 통화 섹션에 표시됨
- 대기 중인 통화 정보에는 발신자 이름(또는 번호)이 정확히 표시됨

## 3. 통화 전환 시나리오

### 테스트 목표
대기 중인 통화와 활성 통화 간에 전환이 정상적으로 이루어지는지 확인

### 테스트 단계
1. 시나리오 2의 상태에서 시작 (A: 대기 중, B: 활성 상태)
2. `on_call_contents` 화면에서 '통화 전환' 버튼 클릭
3. A가 활성화되고 B가 대기 상태로 전환되는지 확인
4. 다시 '통화 전환' 버튼 클릭
5. B가 활성화되고 A가 대기 상태로 전환되는지 확인

### 기대 결과
- '통화 전환' 버튼 클릭 시 활성 통화와 대기 통화가 서로 교체됨
- 화면 상단에 현재 활성 통화 정보가 표시됨
- 화면 중간의 대기 통화 섹션에 대기 중인 통화 정보가 표시됨
- 전환이 여러 번 수행되어도 정상적으로 작동함

## 4. 통화 중 수신 거절 시나리오

### 테스트 목표
통화 중에 수신된 전화를 거절하는 기능이 정상적으로 작동하는지 확인

### 테스트 단계
1. 첫 번째 통화 연결 (A와 통화 중)
2. 두 번째 전화 수신 (B로부터 전화 수신)
3. `call_waiting_dialog` 팝업 표시 확인
4. '거절' 버튼 클릭
5. 팝업이 사라지고 첫 번째 통화가 계속되는지 확인

### 기대 결과
- 새로운 전화 수신 시 `call_waiting_dialog` 팝업이 표시됨
- '거절' 버튼 클릭 시 두 번째 통화가 거절되고 팝업이 사라짐
- 첫 번째 통화는 계속 유지됨
- 대기 중인 통화 정보는 표시되지 않음

## 5. 종료 후 통화 시나리오

### 테스트 목표
통화 중에 수신된 전화를 받기 위해 현재 통화를 종료하는 기능이 정상적으로 작동하는지 확인

### 테스트 단계
1. 첫 번째 통화 연결 (A와 통화 중)
2. 두 번째 전화 수신 (B로부터 전화 수신)
3. `call_waiting_dialog` 팝업 표시 확인
4. '통화끊고 받기' 버튼 클릭
5. 첫 번째 통화(A)가 종료되고, 두 번째 통화(B)가 연결되는지 확인

### 기대 결과
- 새로운 전화 수신 시 `call_waiting_dialog` 팝업이 표시됨
- '통화끊고 받기' 버튼 클릭 시 첫 번째 통화가 종료됨
- 두 번째 통화가 즉시 연결됨
- 대기 중인 통화 정보는 표시되지 않음 (대기 중인 통화가 없으므로)
- 화면 상단에 두 번째 통화 정보가 표시됨 